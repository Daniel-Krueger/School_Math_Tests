let num1,num2,correctAnswer,currentPlayer="",score=0;function saveName(){const e=document.getElementById("name-input").value.trim().toLowerCase();if(e){currentPlayer=e.replace(/[^a-z0-9]/gi,""),localStorage.setItem("mathGamePlayerName",currentPlayer),document.getElementById("user-name").innerText=e.charAt(0).toUpperCase()+e.slice(1);const t=getScoreKey(currentPlayer,getCurrentDate());score=localStorage.getItem(t)?parseInt(localStorage.getItem(t)):0,document.getElementById("score").innerText=score,startGame()}else alert("Bitte gib einen Namen ein.")}function startGame(){document.querySelector(".task").style.display="block",document.querySelector(".answer-section").style.display="block",document.querySelector(".score").style.display="block",document.getElementById("start-game-button").style.display="none",document.getElementById("new-task-button").style.display="block",generateTask()}function generateTask(){currentPlayer&&(num1=Math.floor(20*Math.random())+1,num2=Math.floor(10*Math.random())+1,correctAnswer=num1*num2,document.getElementById("multiplication-task").innerText=`${num1} × ${num2} = ?`,document.querySelector(".answer-section").style.display="inherit",document.getElementById("feedback").innerText="",document.getElementById("user-answer").value="")}function getCurrentDate(){const e=new Date;return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`}function getScoreKey(e,t){return`mathGameScore_${e}_${t}`}function checkAnswer(){if(!currentPlayer)return void alert("Bitte gib deinen Namen ein, bevor du die Aufgaben löst.");const e=parseInt(document.getElementById("user-answer").value);if(isNaN(e))document.getElementById("feedback").innerText="Bitte gib eine gültige Zahl ein.";else if(e===correctAnswer){document.getElementById("feedback").innerText=`Richtig! Gut gemacht! Die Lösung ist ${correctAnswer}`,document.querySelector(".answer-section").style.display="none",score+=10;const e=getScoreKey(currentPlayer,getCurrentDate());localStorage.setItem(e,score),document.getElementById("score").innerText=score,setTimeout(generateTask,1500)}else document.getElementById("feedback").innerText=`Falsch. Die richtige Antwort ist ${correctAnswer}.`,setTimeout(generateTask,5e3)}window.onload=function(){const e=localStorage.getItem("mathGamePlayerName");if(e){currentPlayer=e.replace(/[^a-z0-9]/gi,""),document.getElementById("stored-name").innerText=e.charAt(0).toUpperCase()+e.slice(1),document.getElementById("welcome-message").style.display="block",document.getElementById("name-input-section").style.display="none";const t=getScoreKey(currentPlayer,getCurrentDate());score=localStorage.getItem(t)?parseInt(localStorage.getItem(t)):0,document.getElementById("score").innerText=score}};