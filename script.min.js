let num1,num2,correctAnswer,currentPlayer="",currentScore=0,highscoreKey="highscroes",playerNameKey="playername";function showSection(e){const t=document.querySelector(".highscore-board"),n=document.getElementById("task-board");"highscores"===e?(t.style.display="block",displayHighscores(),n.style.display="none"):(t.style.display="none",n.style.display="block")}function saveName(){const e=document.getElementById("name-input").value.trim();e?(localStorage.setItem(playerNameKey,e),currentScore=0,document.getElementById("score").innerText=currentScore,document.getElementById("unknown-user-section").style.display="none",document.getElementById("welcome-message").style.display="block",document.getElementById("taskBoard").style.display="block",document.getElementById("main").style.display="block",startGame()):alert("Bitte gib einen Namen ein.")}function startGame(){document.querySelector(".task").style.display="block",document.querySelector(".answer-section").style.display="block",document.querySelector(".score").style.display="block",document.getElementById("start-game-button").style.display="none",document.getElementById("new-task-button").style.display="block",generateTask()}function generateTask(){num1=Math.floor(20*Math.random())+1,num2=Math.floor(10*Math.random())+1,correctAnswer=num1*num2,document.getElementById("multiplication-task").innerText=`${num1} × ${num2} = ?`,document.querySelector(".answer-section").style.display="inherit",document.querySelector(".task").style.display="inherit",document.getElementById("feedback").innerText="",document.getElementById("user-answer").value=""}function getCurrentDate(){const e=new Date;return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`}function getScoreKey(e="daily"){return`mathGameScore_${e}`}function checkAnswer(){const e=parseInt(document.getElementById("user-answer").value);isNaN(e)?document.getElementById("feedback").innerText="Bitte gib eine gültige Zahl ein.":e===correctAnswer?(document.getElementById("feedback").innerText=`Richtig! Gut gemacht! Die Lösung ist ${correctAnswer}`,document.querySelector(".answer-section").style.display="none",currentScore+=10,updateHighscore(currentScore),document.getElementById("score").innerText=currentScore,setTimeout(generateTask,1500)):(document.getElementById("feedback").innerText=`Falsch. Die richtige Antwort ist ${correctAnswer}.`,setTimeout(generateTask,5e3))}function updateHighscore(e){let t=JSON.parse(localStorage.getItem(highscoreKey))||[];const n=getCurrentDate(),o=t.find((e=>e.date===n));o?o.score=e:t.push({date:n,score:e}),t.length>10&&(t=t.slice(0,10)),localStorage.setItem(highscoreKey,JSON.stringify(t))}function displayHighscores(){const e=document.getElementById("highscore-list");let t=JSON.parse(localStorage.getItem(highscoreKey))||[];e.innerHTML="",t.forEach((t=>{const n=document.createElement("li");n.textContent=`${t.date}: ${t.score} Punkte`,e.appendChild(n)})),document.querySelector(".highscore-board").style.display="block"}window.onload=function(){const e=localStorage.getItem(playerNameKey);if(e){document.getElementById("stored-name").innerText=e,document.getElementById("welcome-message").style.display="block",document.getElementById("name-input-section").style.display="none";getScoreKey(currentPlayer,getCurrentDate());let t=JSON.parse(localStorage.getItem(highscoreKey))||[];const n=getCurrentDate(),o=t.find((e=>e.date===n));entry=o??{date:n,score:0},currentScore=entry.score,document.getElementById("score").innerText=entry.score,document.getElementById("main").style.display="block"}else document.getElementById("unknown-user-section").style.display="block"};